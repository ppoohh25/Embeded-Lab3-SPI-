#define F_CPU 16000000UL

#include <avr/io.h>
#include <util/delay.h>

void spi_init(void){
  DDRB = 0b00101110;
  SPCR = 0b01010000;
  SPSR = SPSR | 0b00000001;
}

void spi_putc(char data){
  char busy;
  SPDR = data;
  do{ busy = SPSR & 0b10000000; }
  while(busy == 0);
}

int main(void){
  spi_init();
  max7219_set(0,0b00001001,0b00000111);
  while(1){
    max7219_dis(0b00000000,0b00111100,0b01000010,0b01000000,0b00111110,0b00000010,0b01000010,0b00111100,1000); //S
    max7219_dis(0B00000000,0B00111100,0B01000010,0B01000010,0B01111110,0B01000010,0B01000010,0B01000010,1000); //A
    max7219_dis(0B00000000,0B01111100,0B01000010,0B01000010,0B01000010,0B01000010,0B01000010,0B01111100,1000); //D
    max7219_dis(0B00000000,0B00111100,0B01000010,0B01000010,0B01111110,0B01000010,0B01000010,0B01000010,1000); //A
    max7219_dis(0B00000000,0B01000010,0B01000010,0B00100100,0B00011000,0B00011000,0B00011000,0B00011000,1000); //Y
    max7219_dis(0B00000000,0B01000010,0B01000010,0B01000010,0B01000010,0B01000010,0B01000010,0B00111100,1000); //U
  }
}